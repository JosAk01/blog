<link rel="stylesheet" href="/css/styles.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<link href="https://unicons.iconscout.com/release/v4.0.8/css/line.css" rel="stylesheet">
<header>
  <div class="container">
    <div class="logo">
      <a href="/"><span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAADACAMAAAB/Pny7AAAAilBMVEX///9EUEWe1ctATEFMV03n6OfP0c9PWlDe3944RjkmOCc7SDx+hX81Qzb6+vqa08nz9PNvd3CMzsIwPzGtsa5eZ18AFAAAGgAAHAAAFwDQ6uWXnJejp6MrOyxYYlm/wr8cLx0ADgAAAADr9vSNk43F5d8OJhBncGgFIgi239eq2tHa7uu2ubYABgCKjt0dAAAF/ElEQVR4nO2a6ZqqOBBAjQEEw75ot6yOoHY38/6vN4CNFLu3BVvv1PnJhzEna6XCYoEgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgCIIgyN8Ib7uuzY+/lrpuqj+gPnegewFHKeeEI6/ZzoqQlROqj6nWj9A9SaKEUEYHbVT78ppEn9lG8LM65kgrYeg1yi6vMTY+IH8LXbbIN2u7v831uHrNe9p5IzJa1lKR+9tcPLHyNcl4Xpl1WUnCDLH3NWF1daarpx1nP5DhUOYRoMwD6/dH/N0yOs/z7f3m5WToyva4t8327X0fnRob6JDMYZd8apr2mXwNBjq64Mknx5BtcbZ4CMgQ6pehDZH8fxxY514ZNTHNzGS5XGqaaS77fPQw2ES+wpik+Oej3D+eJ5Opw96NqmY9MplK7nFFM7Vdh46eWhEDRSvvwSzd0y+Tdc/xGkh3yxzqKgXm56H1H8Gx1VJbd4agaEiGkMhVB2R2ZkulGG5ftX9QwzfWVfQM68iwDLFitVcm6XRp2qjpvqff15PPnBEZyrw+me5+udiAkdbnkg219dR9MyJDvg+gbZlDr0tm83Gd3sJmoGwy8bwZkyFSoHfKtKc+XAV238Xzg8Wv4wfLEOp2ySSDMstyoFXn2E72006blky2rVWHz6Jr8t2zKaMOu5Rdw+9HGorOKSNRxzBOK6X20G3LJMMuS21ZzJqTVKu6IklK7QnZTto1dRklcAVeF1MZ2ihZJNCU+RyRWZr5OFPh7KcskOM4NgjcdZgxm4zifGebQDIm+8PsaUNGXY4Ms2xBy4pJYeBH5DBfSkQvgKP4OJcM5arMmVENB7pKmzJfYx2TydYLIeSa+wlXoG+iKccZlPFBRoyPgKTblBlZy4pxlk0avypDOlW19oCiZc8kY8GUZlV7osRNmY/bZM6g1h74zyoJl5c9iwyt5Wfjag1Q5KbM6PwvVgC9kqEOLBusL5OuAGI1FOaUYaeaTDWXmDOlDJiMtWEWgKHwQxm1t2eAzJQ9wztVpfsWANZaAG6ZM9lGA89kYM7oYJWT5CllQCv1Lc2c3ZTZ3dAz2QIAtl5Jrhoq5Sh4PqGMaoPlrNo03eFN82u0Z4p9BjYU8cpjAVzMppVZCGA8VeEM3O06whlVG40AkqzsEDQU49zLrhkaMAKYQEa0Yze89DsP2+nmQPPG2GwPSmHEcNPQjoN6TH63jOtwjAZGMabUFHbNrUeAsUlTRs2woahEVwHH6tmNu2VilleXWkFhIzpdyRNQh87D2c/OM5TSRun3yoRlyytO0XyNrmn+W/exeTdooy1vO2neL+OU9aKkSFbo8YBNb0JjcKsxy/SMPppiuE9GBV19ifJEw+/7r2uqiWvKDHWNmVTZmX9nleGr+U2/SxKcPptrErCKbtgloz6wnmmfN+XNppBZgJ5xF6VN53Cg1/SsWEUESrGXq/1pM3MJs82qPWhzr8x106L0Gr7wcdRcZ7JqV4nzhX2Ns7bFw/7jWTNzrobbgeXyXhm9rHctYg1ZQ4dtwZVGNa/WxiUHWMi0AwENzJdrS3H9K8zd+4ywKcbMmqs7etbZApdNQf10LqzyGtHzZcYctLzeZrIza7caWseFRlF01NHx08gs9NN+s4m81nMhJuf8GnATnexWGlj32Ps7SS/tnmQmH0W9d1pxdablF2faR5dK8WN7tYksiVGm+OdoUpkMvi9n3X1B26TWA4fkIyPZ9ZlcUAVXDjhH9gSY0Zg2av4N5JkOZ78CSGhI7vjrTw08nVntmftaxGDf8Uc+DX12PAKW6ePTfu4xjqrzsQUDAv+3a/Rz9PAU1U44/utOGdE4NsK0t6f93nMM0WjG5tbL7jKq14w36fqJP/geRjSaR4H1lJczjwXkEV59kNXyCBeXSS9nH4xYu0hnivyyK9kiz8aDtInFxS87+QsEp4yWFcVIf7s29xI6lkSp5FPDfeGQrESIDccxYnumD04fjCoKwnyfAiMIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiD/K/4DvjlkgnQSth8AAAAASUVORK5CYII=" alt=""></span></a>
    </div>
    
  </div>
</header>
<div class="content-wrapper">
  <aside class="sidebar position-fixed top-0 left-0 overflow-auto h-100 float-left" id="show-side-navigation1">
    <div class="sidebar-header d-flex justify-content-center align-items-center px-3 py-4">      
      <div class="ms-2">
        <h5 class="fs-6 mb-0">
          <a class="text-decoration-none" href="#"><%= session.user.name %></a>
        </h5>
        <p class="mt-1 mb-0">Lorem ipsum dolor sit amet consectetur.</p>
      </div>
    </div>
    <hr>
    <br>
    <div class="search position-relative text-center px-4 py-3 mt-2">
      <input type="text" class="form-control w-100 border-0 bg-transparent" placeholder="Search here">
    </div>
    <br>
    <ul class="categories list-unstyled">
      <li>
       <a href="/admin" class="active"><i class="uil-estate fa-fw"></i> Dashboard</a>
      </li>
      <li>
        <a href="/blogs"><i class="uil-book"></i> Blogs</a>
      </li>
      <li>
       <a href="#"><i class="uil-calendar-alt"></i> Calendar</a>
      </li>
      <li>
       <a href="#"><i class="uil-shopping-cart-alt"></i> Ecommerce</a>
      </li>
      <li class="has-dropdown">
       <a href="#"><i class="uil-bag"></i> Projects</a>
      </li>
      <li>
        <a href="#"><i class="uil-setting"></i> Settings</a>
      </li>
      <li>
        <a href="#"><i class="uil-panel-add"></i> Charts</a>
      </li>
      <li>
        <a href="#"><i class="uil-map-marker"></i> Maps</a>
      </li>
    </ul>
  </aside>

  <div class="main-content">
      <header class="posts-header">
        <h1>Posts</h1>
        <div class="filters">
          <nav class="status-tabs">
            <a href="/blogs" class="<%= status === 'all' ? 'active' : '' %>">ALL</a>
            <a href="/blogs?status=draft" class="<%= status === 'draft' ? 'active' : '' %>">DRAFTS</a>
            <a href="/blogs?status=published" class="<%= status === 'published' ? 'active' : '' %>">PUBLISHED</a>
          </nav>

          <div class="sort">
            <label>SORT BY</label>
            <select id="sortSelect" onchange="handleSortChange(this)">
              <option value="date" <%= sort === 'date' ? 'selected' : '' %>>DATE</option>
              <option value="tags" <%= sort === 'tags' ? 'selected' : '' %>>TAGS</option>
            </select>
          </div>
        </div>
      </header>


<script>
  const tabs = document.querySelectorAll('.status-tabs .tab');
  const sortSelect = document.getElementById('sortSelect');
  const blogs = Array.from(document.querySelectorAll('.blog'));

  // Handle tab filtering
  tabs.forEach(tab => {
    tab.addEventListener('click', e => {
      e.preventDefault();

      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');

      const status = tab.dataset.status;
      blogs.forEach(blog => {
        blog.style.display =
          status === 'all' || blog.dataset.status === status ? 'block' : 'none';
      });
    });
  });

  // Handle sorting
  sortSelect.addEventListener('change', () => {
    const sortBy = sortSelect.value;
    const blogList = document.getElementById('blogList');
    let sorted;

    if (sortBy === 'date') {
      sorted = blogs.sort((a, b) =>
        new Date(b.dataset.date) - new Date(a.dataset.date)
      );
    } else if (sortBy === 'tags') {
      sorted = blogs.sort((a, b) =>
        a.dataset.tags.localeCompare(b.dataset.tags)
      );
    }
    

    blogList.innerHTML = '';
    sorted.forEach(blog => blogList.appendChild(blog));
  });
  function handleSortChange(select) {
    const sort = select.value;
    const urlParams = new URLSearchParams(window.location.search);
    const status = urlParams.get('status') || 'all';
    window.location.href = `/blogs?status=${status}&sort=${sort}`;
  }
</script>


      <% if (groupedBlogs && Object.keys(groupedBlogs).length > 0) { %>
        <% Object.keys(groupedBlogs).forEach(category => { %>
          <section class="category">
            <h2><%= category %></h2>
            <div class="post-grid">
              <% groupedBlogs[category].forEach(blog => { %>
                <article class="post-card" onclick="window.location.href='/blog/<%= blog.slug %>'">
                  <h3><%= blog.title %></h3>
                  <p><%= blog.content.slice(0, 120) %>...</p>
                  <div class="card-footer">
                    <span class="tag"><%= blog.category %></span>
                    <span class="date"><%= new Date(blog.created_at).toDateString() %></span>
                  </div>
                </article>
              <% }) %>
            </div>
          </section>
        <% }) %>
      <% } else { %>
        <p>No blogs yet.</p>
      <% } %>

        </div>
      </section>
    
</div>
</div>
</div>